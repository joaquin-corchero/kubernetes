# 1. Warming up

[Kubernetes reference](https://kubernetes.io/docs/reference/)


## get your dashboard going

- `kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/alternative/kubernetes-dashboard.yaml`
- `kubectl create -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/influxdb/influxdb.yaml`
- `kubectl create -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/influxdb/heapster.yaml`
- `kubectl create -f https://raw.githubusercontent.com/kubernetes/heapster/master/deploy/kube-config/influxdb/grafana.yaml`

execute `kubectl proxy`

`kubectl cluster-info | grep dashboard`

[Local dashboard](http://localhost:8001/api/v1/namespaces/kube-system/services/http:kubernetes-dashboard:/proxy/#!/cluster?namespace=_all)


`kubectl explain pods` -> explains the pod object

### running a container

`docker run busybox echo "Hello World"`

### creating an image

`docker build -t imageName .` --> docker file on current dir

`docker imagages` -> list images

### running a container

`docker run --name kubia-container -p 8080:8080 -d kubia` -> run container on port 8080 against 8080

`docker exec -it kubia-container bash` -> look inside your container

`ps aux` -> show processes running on containers

`docker tag kubia joaquincorchero/kubia` -> tag image

`docker push joaquincorchero/kubia` -> push image to registry


### kubernetes start

`kubectl cluster info`

`kubectl get nodes` -> shows running nodes

`kubectl get pods` -> shows running pods

### deploying an app

`kubectl run kubia --image=joaquincorchero/kubia --port=8080 --generator=run/v1` -> creates a pod in a replication controller (run created the rc)

`kubectl get rc` -> shows replication controllers

`kubectl expose rc kubia --type=LoadBalancer --name=kubia-http` -> creates a service object that allows access to the pod from outside the cluster

`kubectl get services` == `kubectl get svc` -> lists services

The app should be accessible through [here](http://localhost:8080/) as per the informaction from the services list

`kubectl get all` -> shows all the objects

`kubectl scale rc kubia --replicas=3` -> scales up kubia

`curl http://localhost:8080` -> should show different hosts

`kubectl get pods -o wide` -> shows node info + IP

`kubectl describe pod kubia-25m5d` -> pod details

### YAML descriptors

`kubectl get po kubia-25m5d -o yaml` -> shows the yaml for the pod

[kubia manual](./kubia-manual.yaml)

`kubectl create -f kubia-manual.yaml` -> creates a pod using manifest